const VideoTerror = {
    title: "FILME DE TERROR",
    subtitle: [
        "FPS",
        "DESCOBRIMENTO",
        "PESTE",
        `PRECEDENTES <div id="precedentes_terror"/></div>`
    ],
    vid_path: [
        "./video/data/mp4/fps.mp4",
        "./video/data/mp4/descobrimento.mp4",
        "./video/data/mp4/peste.mp4",
        "./video/data/mp4/sobreAmerica.mp4",
        "./video/data/mp4/band.mp4",
    ],
    aud_path: [
        "./video/data/mp3/terrorAudio_0.mp3"
    ],
    order: [
        "title",
        "text",
        "subtitle",
        "video",
        "text",
        "subtitle",
        "video",
        "text",
        "subtitle",
        "video",
        "audio",
        "text",
        "subtitle",
        "text",
        "video",
        "video",
        "text"
    ],
    text: [
        [
            `<i>Macbeth</i> <br>
            como um <i>Ricardo III</i> da maturidade <br> <br>
            vídeo <br>
            a partir da subtração de frames consecutivos <br> <br>
            a sobreposição dá lugar ao descascamento da imagem <br>
            a ideia de composição (vide <a class="a_text" href="#precedentes_terror">PRECEDENTES</a>) <br>
            que tinha como objetivo uma espacialidade contínua <br>
            é substituída pela colagem fragmentária <br> <br>
            perspectiva <br>
            proporção <br>
            coerência motora <br> 
            (as partes se movimentando em uníssono) <br>
            são descartadas`
        ],
        [
            `passado — passado recente — presente <br>
            processo de definição da violência <br>
            de <i>Doom</i> a <i>Call of Duty</i> <br>
            de Tróia a Bagdá <br>
            não no sentido de desenvolvimento "técnico" <br>
            mas de condensação de uma história de violência <br>
            difusa para a memória coletiva`
        ],
        [
            `cena da guerra de <i>Macbeth</i> <br>
            o permanente estado de 'descobrimento' <br>
            redescoberta <br>
            Filme de Terror <br>
            (vide <a href="./texto.html" class="a_text">ROTEIRO DE FILME DE TERROR</a>) <br> <br>
            invasão portuguesa <br>
            escravidão <br>
            canudos <br>
            integralismo <br>
            estado novo <br>
            seca <br>
            ditadura <br>
            carandiru <br>
            violência policial <br>
            invasão brasileira`
        ],
        [
            `cena das bruxas de Macbeth <br>
            bixos escrotos e família tradicional <br> <br>
            áudio de pastores evangélicos diabólicos`
        ],
        [
            `sobreposição aleatória <br>
            de imagens e vídeos latino-americanos <br> <br>
            Sobre América <br>
            Obama ordenou: Estamos Unidos <br> <br>
            2019`
        ],
        [
            `entre-frames <br>
            contornos para montagem <br> <br>
            rasura <br>
            sobreposição <br>
            composição <br>
            desenho <br> <br>
            quem foi Olavo Cadáver <br>
            perto do Datena <br>
            na formação e radicalização <br>
            da mais nova onda fascista brasileira? <br> <br>
            2020`
        ]
    ]
}

const VideoNao = {
    title: "NÃO",
    subtitle: [],
    vid_path: [
        "./video/data/mp4/nao.mp4"
    ],
    aud_path: [],
    order: [
        "title",
        "video",
        "text"
    ],
    text: [
        [
            `filmado com uma câmera de celular quebrada <br> <br>
            o <b>NÃO</b> de uma placa do metrô <br>
            (linha amarela — SP) <br>
            periodicamente iluminada <br>
            pelas luzes do túnel`
        ]
    ]
}

const VideoMonk = {
    title: "SORT( ) MONK",
    subtitle: [],
    vid_path: [
        "./video/data/mp4/monk.mp4"
    ],
    aud_path: [
        "./video/data/mp3/monkAudio_0.mp3"
    ],
    order: [
        "title",
        "video",
        "audio",
        "text"
    ],
    text: [
        [
            `<i>Ruby, My Dear</i> <br>
            Thelonious Monk <br> <br>
            função Array.prototype.sort() do javascript <br>
            mas regulada por alguma equação <br> <br>
            algo como: <br>
            reordene o conjunto de dados <br>
            em valores ascendentes <br>
            conforme  <br>
            o resultado do cosseno de um dado <i>n</i> <br>
            dividido pelo seno de cada um dos demais <br> <br>
            aqui o vídeo é secundário <br>
            o que importa é o áudio <br>
            que aponta para outras trilhas`
        ]
    ]
}

const VideoEq = {
    title: "EQUAÇÕES",
    subtitle: [
        "SEM TÍTULO",
        "MOEDAPOEMA"
    ],
    vid_path: [
        "./video/data/mp4/eq.mp4",
        "./video/data/mp4/moedaPoema.mp4"
    ],
    aud_path: [],
    order: [
        "title",
        "subtitle",
        "video",
        "text",
        "subtitle",
        "video",
        "text"
    ],
    text: [
        [
            `equação matemática <br>
            f(x, y) <br>
            onde x e y são coordenadas do quadro de pixels <br> <br>
            mesmo código usado nas serigrafias <br>
            (vide <a href="./serigrafia.html" class="a_text">SERIGRAFIA</a>) <br> <br>
            aqui <br>
            as variáveis se movimentando: <br>
            x <br>
            y <br>
            e outras complementares`
        ],
        [
            `uso de equações <br>
            para determinar o posicionamento de palavras <br> <br>
            <i>poema</i> e <i>moeda</i> sendo quase anagramas <br>
            <i>d</i> e <i>p</i> anagramas visuais <br> <br>
            no exemplo: <br>
            (para cada pixel: <br>
            n = sqrt(x^2 + y^2) <br>
            m = 10 <br>
            se n > m -> cor preta <br>
            se n < m -> cor branca) <br> <br>
            ocorre a seguinte alteração: <br>
            se n > m -> coordenada (x, y) de <i>poema</i> <br>
            se n < m -> coordenada (x, y) de <i>moeda</i> <br> <br>
            & (por ser vídeo) <br> <br>
            n <br>
            m <br>
            e variáveis complementares <br>
            se movimentam <br>`
        ]
    ]
}

const VideoMaiakovski = {
    title: "FLAUTA-VÉRTEBRA",
    subtitle: [],
    vid_path: [
        "./video/data/mp4/flautaVertebra.mp4"
    ],
    aud_path: [],
    order: [
        "title",
        "video",
        "text",
        "text"
    ],
    text: [
        [
            `A FLAUTA-VÉRTEBRA <br>
            <i>Prólogo</i> <br> <br>
            A todas vocês, <br>
            que eu amei e que eu amo, <br>
            ícones guardados num coração-caverna, <br>
            como quem num banquete ergue a taça e celebra, <br>
            repleto de versos levanto meu crânio. <br> <br>
            Penso, mais de uma vez: <br>
            seria melhor talvez <br>
            pôr-me o ponto final de um balaço. <br>
            Em todo caso <br>
            eu <br>
            hoje vou dar meu concerto de adeus. <br> <br>
            Memória! <br>
            Convoca aos salões do cérebro <br>
            um renque inumerável de amadas. <br>
            Verte o riso de pupila em pupila, <br>
            veste a noite de núpcias passadas. <br>
            De corpo a corpo verta a alegria. <br>
            Esta noite ficará na História. <br>
            Hoje executarei meus versos <br>
            na flauta de minhas próprias vértebras. <br> <br>
            1915 <br> <br>
            <i>(Tradução de Haroldo de Campos e Boris Schnaiderman)</i>`
        ],
        [
            `vídeo feito no Pure Data <br>
            com um objeto que escreve bytes <br>
            em um arquivo genérico <br>
            [mr.peach/binfile] <br> <br>
            revesamento de informações RGB <br>
            de um vídeo em branco e de imagens <br>
            todos descompactados <br> <br>
            porém <br>
            omitindo ou repetindo linhas aleatoriamente <br>
            para a extrapolação dos limites do quadro <br> <br>
            primeiro vídeo com auxílio do computador`
        ]
    ]
}

const VideoEstampa = {
    title: "ESTAMPA",
    subtitle: [],
    vid_path: [
        "./video/data/mp4/bruxa.mp4",
        "./video/data/mp4/estampa.mp4"
    ],
    aud_path: [],
    order: [
        "title",
        "video",
        "text",
        "video"
    ],
    text: [
        [
            `código para mudar a resolução de um vídeo <br>
            e <br>
            reduzir as cores por meio de retículas <br> <br>
            pesquisa de estampa <br>`
        ]
    ]
}

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//
//##########################################################################//
//##########################################################################//
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//

const Data = {
    menu_background: `Parecequeovídeo,comoamúsica,nãoéapenasarticuladoedespendidonotempo(comoofilme),massimquetodasuasubstânciapodeserclassificadaemtermosdetemporalidade,ritmo,frequência.Avarreduradevídeolembraumtipodeestêncilmétrico,ostinato,batidadocoração.Oquadrodovídeonãoéumretângulo.Éumaformaameboidedegeneradasepassandoporretânguloparaacomodaraprogramaçãobaratadoscinescorujões.Aprimeiraimagemdevídeoquevi,emumpequenotuboderaioscatódicossobreumamastabadeummetrodealtura,eracircular.Asinconclusõesdavideoarteondechegueimaispertodemomentosdeverdadeiradescobertaeperipeteiaparecemexibir,maisfrequentemente,umtropismorumoaumtipo(oumuitostipos)desimultaneidademetamórfica.(Nesteaspecto,ovídeoseassemelhaaomitoovidiano).Aartedofilme,soberanamentecômodaemespaçosprofundos,tantovisuaisquantoaurais,precisadeumainvençãointrincadaparaescapardo‘planofrontal’datemporalidade—umaspectoquesepretendenemimperfectivonemperfectivo,masAbsoluto.Jáovídeo,imanentementegráfico,polemicamenteanti-ilusionista,alcançaoequilíbrioespaço-temporalatravésdeumadissolução,umafluidificação,detodosossegmentosdaquelaunidadetemporalchamadapornósdeEternidade,rumoaumaversãomalpassadadoEraUmaVez.Osprocedimentosdamaioriadasartesequivalemamotorestérmicos;filmeevídeoprimeirolevamaenergiaaopontomaisaltodaescalaentrópica.Fótonsimprimemsobreumdelírioaleatóriodecristaisdehalogenetodeprataimersosnaemulsãofílmicaumailusãodeordem;elétronsdistorcemavarreduraordenadadovídeo,precisacomoumatreliçadecristal,emumailusãodedelírio.`,
    gifs: [
        Gif_0,
        Gif_1,
        Gif_2,
        Gif_3,
        Gif_4,
        Gif_5
    ],
    videos: [
        VideoTerror,
        VideoNao,
        VideoMonk,
        VideoEq,
        VideoMaiakovski,
        VideoEstampa
    ]
}

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//
//##########################################################################//
//##########################################################################//
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//

const Vid = {
    cont: document.getElementById("content_container"),
    cont_h: undefined,
    menu_cont: undefined,
    num_col: 25,
    num_row: 25,
    gif_cont: [],
    rows: [],
    letters: [],
    gal_cover: undefined,
    gal_cont: [],
    close_btn: undefined,
    title: undefined,
    subtitles: [],
    texts: [],
    videos: [],
    aud_cont: [],
    audios: [],
    labels: [
        "title",
        "subtitle",
        "text",
        "video",
        "audio"
    ]
}

const VidA = {
    anim_gif: {
        key_f: [
            {
                fontSize: undefined
            },
            {
                fontSize: "0px"
            }
        ],
        opt: {
            duration: 1000,
            fill: "forwards",
            easing: "ease-in-out",
            direction: "normal"
        }
    }
}

const VidF = {};

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//
//##########################################################################//
//##########################################################################//
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//

VidF.initVid = () => {
    Vid.menu_cont = document.createElement("div");
    Vid.menu_cont.className = "menu_container";
    Vid.cont.appendChild(Vid.menu_cont);
    VidF.initGif(0, 0);
}

VidF.initGif = (letter_idx, gif_idx) => {
    Vid.gif_cont.push(document.createElement("div"));
    Vid.gif_cont.at(-1).className = "gif_container";
    Vid.menu_cont.appendChild(Vid.gif_cont.at(-1));
    if (gif_idx == Data.gifs.length) {
        VidF.resizeGif();
        return;
    } else {
        Vid.rows.push([]);
        Vid.letters.push([]);
        let i = 0;
        while (i < Vid.num_row) {
            Vid.rows[gif_idx].push(document.createElement("div"));
            Vid.rows[gif_idx].at(-1).className = "row";
            Vid.gif_cont.at(-1).appendChild(Vid.rows[gif_idx].at(-1));
            let j = 0;
            while (j < Vid.num_col) {
                Vid.letters[gif_idx].push(document.createElement("div"));
                Vid.letters[gif_idx].at(-1).className = "letter";
                Vid.letters[gif_idx].at(-1).innerHTML = Data.menu_background[letter_idx];
                Vid.rows[gif_idx].at(-1).appendChild(Vid.letters[gif_idx].at(-1));
                letter_idx++;
                if (letter_idx == Data.menu_background.length) letter_idx = 0;
                j++;
            }
            i++;
        }
        VidF.colorGif(gif_idx);
        gif_idx++;
        VidF.initGif(letter_idx, gif_idx);
    }
}

VidF.colorGif = (gif_idx) => {
    let i = 0;
    while (i < Data.gifs[gif_idx].idx.length) {
        Vid.letters[gif_idx][Data.gifs[gif_idx].idx[i]].style.color = `rgba(${Data.gifs[gif_idx].pix[i]}, ${Data.gifs[gif_idx].pix[i]}, ${Data.gifs[gif_idx].pix[i]})`;
        i++;
    }
}

VidF.resizeGif = () => {
    let cont_w = Vid.cont.getBoundingClientRect().width;
    let letter_w = cont_w / 25;
    Vid.menu_cont.style.width = `${cont_w}px`;
    [...document.getElementsByClassName("letter")].map(e => {
        e.style.width = `${letter_w}px`;
        e.style.height = `${letter_w}px`;
    });
    Vid.cont.style.fontSize = `${letter_w - 2}px`;
    VidA.anim_gif.key_f[0].fontSize = `${letter_w - 2}px`;
}

VidF.clickGif = () => {
    Vid.gif_cont.forEach((e, i) => {
        e.onpointerup = (f) => {
            VidA.anim_gif.opt.direction = "normal";
            Vid.cont.animate(VidA.anim_gif.key_f, VidA.anim_gif.opt);
            setTimeout(() => {
                Vid.gal_cover.style.display = "block";
                VidF.openGal(i, f.pageY);
            }, VidA.anim_gif.opt.duration + 100);
        }
    });

}

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//
//##########################################################################//
//##########################################################################//
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//

VidF.initGal = () => {
    Vid.gal_cover = document.createElement("div");
    Vid.gal_cover.className = "gallery_cover";
    Head.body.appendChild(Vid.gal_cover);
    Vid.gal_cont = document.createElement("div");
    Vid.gal_cont.className = "gallery_container";
    Head.body.appendChild(Vid.gal_cont);
    Vid.close_btn = document.createElement("div");
    Vid.close_btn.className = "close_button";
    Vid.gal_cont.appendChild(Vid.close_btn);
    Vid.close_btn.onpointerup = () => {
        setTimeout(() => {
            Vid.gal_cover.style.display = "none";
            Vid.gal_cont.style.display = "none";
            VidA.anim_gif.opt.direction = "reverse";
            let i = Vid.gal_cont.children.length - 1;
            while (i > 0) {
                Vid.gal_cont.removeChild(Vid.gal_cont.children[i]);
                i--;
            }
            Vid.title = undefined;
            Vid.subtitles = [];
            Vid.texts = [];
            Vid.videos = [];
            Vid.aud_cont = [];
            Vid.audios = [];
            Vid.cont.animate(VidA.anim_gif.key_f, VidA.anim_gif.opt);
        }, 100);
    }
}

VidF.openGal = (gif_idx, y_coord) => {
    Vid.gal_cont.style.display = "flex";
    Vid.gal_cont.style.top = `${y_coord}px`;
    let border_idx = 0;
    Data.videos[gif_idx].order.forEach(e => {
        switch (true) {
            case e == "title":
                Vid.title = document.createElement("div");
                Vid.title.className = "gallery_title";
                Vid.gal_cont.appendChild(Vid.title);
                break;
            case e == "subtitle":
                Vid.subtitles.push(document.createElement("div"));
                Vid.subtitles.at(-1).className = "gallery_subtitle";
                Vid.gal_cont.appendChild(Vid.subtitles.at(-1));
                break;
            case e == "text":
                Vid.texts.push(document.createElement("div"));
                Vid.texts.at(-1).className = "gallery_text";
                Vid.gal_cont.appendChild(Vid.texts.at(-1));
                Vid.texts.at(-1).style.borderTop = "2px solid var(--black)";
                if (border_idx % 2 == 0) Vid.texts.at(-1).style.borderLeft = "2px solid var(--black)";
                else Vid.texts.at(-1).style.borderRight = "2px solid var(--black)";
                border_idx++;
                break;
            case e == "video":
                Vid.videos.push(document.createElement("video"));
                Vid.gal_cont.appendChild(Vid.videos.at(-1));
                Vid.videos.at(-1).style.borderTop = "2px solid var(--black)";
                if (border_idx % 2 == 0) Vid.videos.at(-1).style.borderLeft = "2px solid var(--black)";
                else Vid.videos.at(-1).style.borderRight = "2px solid var(--black)";
                border_idx++;
                break;
            case e == "audio":
                Vid.aud_cont.push(document.createElement("div"));
                Vid.aud_cont.at(-1).className = "gallery_audio";
                Vid.audios.push(document.createElement("audio"));
                Vid.aud_cont.at(-1).appendChild(Vid.audios.at(-1));
                Vid.gal_cont.appendChild(Vid.aud_cont.at(-1));
                Vid.aud_cont.at(-1).style.borderTop = "2px solid var(--black)";
                if (border_idx % 2 == 0) Vid.aud_cont.at(-1).style.borderLeft = "2px solid var(--black)";
                else Vid.aud_cont.at(-1).style.borderRight = "2px solid var(--black)";
                border_idx++;
                break;
        }
    });
    VidF.setTitle(gif_idx);
    VidF.setSubtitles(gif_idx);
    VidF.setTexts(gif_idx);
    VidF.setVideos(gif_idx);
    VidF.setAudios(gif_idx);
}

VidF.setTitle = (gif_idx) => {
    Vid.title.innerHTML = Data.videos[gif_idx].title;
}

VidF.setSubtitles = (gif_idx) => {
    if (Vid.subtitles.length > 0) {
        Vid.subtitles.forEach((e, i) => {
            e.innerHTML = Data.videos[gif_idx].subtitle[i];
        });
    }
}

VidF.setTexts = (gif_idx) => {
    if (Vid.texts.length > 0) {
        Vid.texts.forEach((e, i) => {
            e.innerHTML = Data.videos[gif_idx].text[i];
        });
    }
}

VidF.setVideos = (gif_idx) => {
    if (Vid.videos.length > 0) {
        Vid.videos.forEach((e, i) => {
            e.src = Data.videos[gif_idx].vid_path[i];
            e.controls = "controls";
            e.controlsList = "nodownload";
            e.preload = "metadata";
        });
    }
}

VidF.setAudios = (gif_idx) => {
    if (Vid.audios.length > 0) {
        Vid.audios.forEach((e, i) => {
            e.src = Data.videos[gif_idx].aud_path[i];
            e.controls = "controls";
            e.controlsList = "nodownload";
            e.preload = "metadata";
        });
    }
}

//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//
//##########################################################################//
//##########################################################################//
//||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||//

VidF.initVid();
VidF.initGal();
VidF.clickGif();